# üìä MONITORING & ANALYTICS
# =============================================================================

# Enable detailed logging for troubleshooting
DEBUG_MODE=false
LOG_API_RESPONSES=false
LOG_CACHE_HITS=true

# Performance monitoring
MONITOR_RESPONSE_TIMES=true
ALERT_SLOW_APIS=true
SLOW_API_THRESHOLD=5000  # 5 seconds

# =============================================================================
# üåê CORS & PROXY SETTINGS
# =============================================================================

# Yahoo Finance proxy fallback URLs (tried in order)
YAHOO_PROXY_1=https://api.allorigins.win/raw?url=
YAHOO_PROXY_2=https://cors-anywhere.herokuapp.com/
YAHOO_PROXY_3=https://api.codetabs.com/v1/proxy?quest=

# CORS settings
CORS_ORIGIN=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

# =============================================================================
# üö® PRODUCTION DEPLOYMENT SETTINGS
# =============================================================================

# For production deployment, update these:
NODE_ENV=development
# NODE_ENV=production  # Uncomment for production

# Production API URLs (if different)
# PROD_API_BASE_URL=https://your-production-api.com

# Database settings (if you add database later)
# DATABASE_URL=your_database_connection_string

# Security settings for production
# JWT_SECRET=your_jwt_secret_for_auth
# ENCRYPTION_KEY=your_encryption_key

# =============================================================================
# üîÑ API ROTATION & FAILOVER SETTINGS
# =============================================================================

# API timeout settings (milliseconds)
API_TIMEOUT=10000              # 10 seconds default timeout
YAHOO_PROXY_TIMEOUT=8000       # 8 seconds for proxy calls
FALLBACK_TIMEOUT=5000          # 5 seconds for fallback APIs

# Retry logic
MAX_RETRIES=3                  # Maximum retries per API
RETRY_DELAY=1000              # 1 second between retries
EXPONENTIAL_BACKOFF=true      # Use exponential backoff for retries

# Circuit breaker settings
CIRCUIT_BREAKER_THRESHOLD=5    # Failures before circuit opens
CIRCUIT_BREAKER_TIMEOUT=60000  # 1 minute before retry
CIRCUIT_BREAKER_RESET=300000   # 5 minutes to reset

# =============================================================================
# üìà STOCK DATA CONFIGURATION
# =============================================================================

# Default stock symbols for ticker
DEFAULT_INDIAN_SYMBOLS=RELIANCE,TCS,HDFCBANK,INFY,HINDUNILVR,ITC,SBIN,BHARTIARTL,ASIANPAINT,MARUTI
DEFAULT_GLOBAL_SYMBOLS=AAPL,GOOGL,MSFT,AMZN,TSLA,META,NVDA,NFLX,BRK.B,JPM

# Market hours (IST for Indian, EST for Global)
INDIAN_MARKET_OPEN=09:15
INDIAN_MARKET_CLOSE=15:30
GLOBAL_MARKET_OPEN=09:30
GLOBAL_MARKET_CLOSE=16:00

# Data refresh intervals
TICKER_REFRESH_INTERVAL=30000     # 30 seconds
STOCK_DETAIL_REFRESH=60000       # 1 minute
MARKET_STATUS_REFRESH=300000     # 5 minutes

# =============================================================================
# üé® FRONTEND CONFIGURATION
# =============================================================================

# API base URL for frontend (automatically set by Vite)
VITE_API_URL=http://localhost:3001/api

# For production frontend:
# VITE_API_URL=https://your-backend-domain.com/api

# WebSocket settings (for future real-time features)
# ENABLE_WEBSOCKETS=false
# WEBSOCKET_PORT=3002

# =============================================================================
# üì± NOTIFICATION SETTINGS (Future Enhancement)
# =============================================================================

# WhatsApp API settings (for future implementation)
# WHATSAPP_API_KEY=your_whatsapp_api_key
# WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id

# Email notification settings
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password

# Push notification settings
# FIREBASE_SERVER_KEY=your_firebase_server_key
# VAPID_PUBLIC_KEY=your_vapid_public_key
# VAPID_PRIVATE_KEY=your_vapid_private_key

# =============================================================================
# üß™ TESTING & DEVELOPMENT
# =============================================================================

# Test mode settings
TEST_MODE=false
USE_MOCK_DATA_ONLY=false       # Force mock data for testing
SIMULATE_API_FAILURES=false    # Simulate API failures for testing

# Development helpers
AUTO_RESTART_ON_ERROR=true
VERBOSE_LOGGING=true
ENABLE_API_DOCS=true           # Enable /api/docs endpoint

# Performance testing
LOAD_TEST_MODE=false
MAX_CONCURRENT_REQUESTS=100

# =============================================================================
# üíæ CACHING STRATEGY
# =============================================================================

# Cache types and durations
TICKER_CACHE_TTL=60000         # 1 minute
STOCK_DETAIL_CACHE_TTL=120000  # 2 minutes  
SEARCH_CACHE_TTL=300000        # 5 minutes
MARKET_STATUS_CACHE_TTL=60000  # 1 minute

# Cache size limits
MAX_CACHE_SIZE=1000            # Maximum cache entries
CACHE_CLEANUP_INTERVAL=300000  # 5 minutes cleanup interval

# Redis cache (if you want to add Redis later)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_redis_password
# USE_REDIS_CACHE=false

# =============================================================================
# üîê SECURITY SETTINGS
# =============================================================================

# Rate limiting per IP
RATE_LIMIT_PER_IP=100          # Requests per window per IP
RATE_LIMIT_WINDOW_MS=900000    # 15 minutes

# API key validation
VALIDATE_API_KEYS=true
API_KEY_CACHE_TTL=3600000     # 1 hour

# Request validation
MAX_REQUEST_SIZE=1mb
ENABLE_HELMET=true            # Security headers
ENABLE_COMPRESSION=true       # Response compression

# =============================================================================
# üìä ANALYTICS & MONITORING (Future Enhancement)
# =============================================================================

# Analytics providers
# GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
# MIXPANEL_TOKEN=your_mixpanel_token

# Error tracking
# SENTRY_DSN=your_sentry_dsn
# BUGSNAG_API_KEY=your_bugsnag_key

# Performance monitoring
# NEW_RELIC_LICENSE_KEY=your_newrelic_key
# DATADOG_API_KEY=your_datadog_key

# =============================================================================
# ‚ö° ADVANCED FEATURES (Future Roadmap)
# =============================================================================

# AI/ML features
# ENABLE_AI_INSIGHTS=false
# OPENAI_API_KEY=your_openai_key
# AI_MODEL=gpt-3.5-turbo

# Blockchain integration
# WEB3_PROVIDER_URL=your_web3_provider
# ENABLE_CRYPTO_TRACKING=false

# Social trading features
# ENABLE_SOCIAL_FEATURES=false
# SOCIAL_FEED_CACHE_TTL=300000

# Portfolio management
# ENABLE_PORTFOLIO_TRACKING=false
# PORTFOLIO_SYNC_INTERVAL=300000

# =============================================================================
# üìù CONFIGURATION NOTES
# =============================================================================

# Remember to:
# 1. Copy this file to server/.env
# 2. Add your free API keys
# 3. Restart the server after changes
# 4. Never commit .env files to git
# 5. Use .env.example for sharing template

# Production checklist:
# ‚ñ° Set NODE_ENV=production
# ‚ñ° Use HTTPS URLs
# ‚ñ° Set secure CORS origins
# ‚ñ° Add rate limiting
# ‚ñ° Enable monitoring
# ‚ñ° Set up error tracking
# ‚ñ° Configure backups

# =============================================================================üöÄ ENHANCED VIBHA STOCKALERTS - MULTI-PROVIDER API CONFIGURATION
# =============================================================================

PORT=3001

# =============================================================================
# üáÆüá≥ INDIAN MARKET APIs (Priority Order)
# =============================================================================

# 1. Financial Modeling Prep (RECOMMENDED - Priority 1)
# ‚úÖ FREE: 250 calls/day
# ‚úÖ Excellent Indian stock coverage (NSE/BSE)
# ‚úÖ High reliability and data accuracy
# üîó Get free key: https://financialmodelingprep.com/developer/docs
FMP_API_KEY=your_free_fmp_key_here

# 2. Twelve Data (Priority 2)
# ‚úÖ FREE: 800 calls/day  
# ‚úÖ Good Indian + Global coverage
# ‚úÖ Real-time data support
# üîó Get free key: https://twelvedata.com/pricing
TWELVE_DATA_API_KEY=your_free_twelve_data_key_here

# 3. Alpha Vantage (Priority 3)
# ‚úÖ FREE: 500 calls/day
# ‚úÖ Indian + Global markets
# ‚úÖ Established provider
# üîó Get free key: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=your_free_alpha_vantage_key_here

# 4. Polygon.io (Priority 4) 
# ‚úÖ FREE: 5 calls/minute
# ‚úÖ Good for real-time data
# üîó Get free key: https://polygon.io/pricing
POLYGON_API_KEY=your_free_polygon_key_here

# 5. IEX Cloud (Priority 5)
# ‚úÖ FREE: 50,000 calls/month
# ‚úÖ US markets focus
# üîó Get free key: https://iexcloud.io/pricing
IEX_API_KEY=your_free_iex_key_here

# =============================================================================
# üåç GLOBAL MARKET APIs
# =============================================================================

# Alpha Vantage (same key as above works for both Indian and Global)
# ALPHA_VANTAGE_API_KEY=your_key_above

# =============================================================================
# ‚öôÔ∏è SYSTEM CONFIGURATION
# =============================================================================

# Cache settings (in milliseconds)
CACHE_DURATION=60000          # 1 minute cache for real-time data
LONG_CACHE_DURATION=300000    # 5 minutes for search results

# Rate limiting
RATE_LIMIT_WINDOW=900000      # 15 minutes window
RATE_LIMIT_MAX_REQUESTS=200   # Max requests per window

# Feature flags
ENABLE_INDIAN_MARKETS=true
ENABLE_GLOBAL_MARKETS=true
ENABLE_MOCK_FALLBACK=true     # Use realistic mock data if all APIs fail
ENABLE_YAHOO_PROXY=true       # Use Yahoo Finance with CORS proxy

# Logging
LOG_LEVEL=info
LOG_API_CALLS=true

# =============================================================================
# üìã QUICK SETUP INSTRUCTIONS
# =============================================================================

# üèÉ‚Äç‚ôÇÔ∏è IMMEDIATE START (No Setup Required)
# Your app works RIGHT NOW with:
# ‚úÖ Yahoo Finance (with CORS proxy)
# ‚úÖ Enhanced realistic mock data
# ‚úÖ 4-layer fallback system
# Just run: npm run dev:full

# üöÄ RECOMMENDED: Add FREE API Keys for Better Data

# Step 1: Financial Modeling Prep (HIGHEST PRIORITY)
# 1. Go to: https://financialmodelingprep.com/developer/docs
# 2. Click "Get Free API Key"
# 3. Sign up with email
# 4. Verify email and login
# 5. Go to Dashboard ‚Üí API Keys
# 6. Copy your free API key
# 7. Replace "your_free_fmp_key_here" above
# 8. Restart server: npm run dev:full

# Step 2: Twelve Data (HIGH PRIORITY)
# 1. Go to: https://twelvedata.com/pricing
# 2. Click "Start Free" 
# 3. Create account
# 4. Go to Dashboard ‚Üí API Keys
# 5. Copy your free API key
# 6. Replace "your_free_twelve_data_key_here" above
# 7. Restart server

# Step 3: Alpha Vantage (MEDIUM PRIORITY)
# 1. Go to: https://www.alphavantage.co/support/#api-key
# 2. Enter your email
# 3. Click "GET FREE API KEY"
# 4. Check email for the key
# 5. Replace "your_free_alpha_vantage_key_here" above
# 6. Restart server

# =============================================================================
# üí° PERFORMANCE OPTIMIZATION TIPS
# =============================================================================

# Tip 1: API Priority System
# The system tries APIs in priority order:
# FMP ‚Üí Twelve Data ‚Üí Alpha Vantage ‚Üí Yahoo Proxy ‚Üí Mock Data

# Tip 2: Smart Caching
# - Real-time data cached for 1 minute
# - Search results cached for 5 minutes
# - Automatic cache cleanup

# Tip 3: Rate Limit Management
# Each API has different limits - system automatically rotates

# Tip 4: Mock Data Fallback
# If all APIs fail, realistic mock data ensures app keeps working

# =============================================================================
# üéØ EXPECTED PERFORMANCE WITH DIFFERENT CONFIGURATIONS
# =============================================================================

# With NO API keys (Default):
# ‚úÖ Yahoo Finance proxy (limited reliability)
# ‚úÖ Enhanced mock data fallback
# ‚úÖ Basic functionality works
# ‚ö†Ô∏è Some data may be simulated

# With FMP key only:
# ‚úÖ 250 real Indian stock calls/day
# ‚úÖ High quality data
# ‚úÖ Professional reliability
# ‚úÖ Yahoo proxy fallback

# With ALL FREE APIs:
# ‚úÖ 1,500+ total free calls/day
# ‚úÖ 99.9% uptime reliability
# ‚úÖ Multiple data sources
# ‚úÖ Automatic failover
# ‚úÖ Professional-grade system

# =============================================================================
# üîß TROUBLESHOOTING
# =============================================================================

# Issue: "API Key not configured" in logs
# Solution: Add the free API keys above (optional but recommended)

# Issue: "Rate limit exceeded"
# Solution: System automatically switches to next API provider

# Issue: Stock ticker shows "API Error"
# Solution: Fixed! Enhanced system has 4-layer fallback protection

# Issue: Some data shows as "mock"
# Solution: Add real API keys for live data

# Issue: Server won't start
# Solution: Check that indian-markets-api.js file exists

# =============================================================================
# üéâ SUCCESS INDICATORS
# =============================================================================

# ‚úÖ Server starts without errors
# ‚úÖ Health check shows multiple providers
# ‚úÖ Stock ticker shows real-time data
# ‚úÖ No "API Error" messages
# ‚úÖ Automatic provider switching works
# ‚úÖ Cache system active

# Test your setup:
# curl http://localhost:3001/api/health
# curl http://localhost:3001/api/stocks/ticker
# curl http://localhost:3001/api/stocks/RELIANCE
# curl http://localhost:3001/api/setup

# =============================================================================
#
